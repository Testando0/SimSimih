<!DOCTYPE html>
<html>
<head>
    <title>Gerador Real-Time</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; text-align: center; padding: 50px; }
        textarea { width: 100%; max-width: 500px; height: 100px; background: #111; color: #fff; border: 1px solid #333; padding: 10px; border-radius: 8px; }
        button { background: #00ff88; color: #000; border: none; padding: 15px 30px; font-weight: bold; cursor: pointer; border-radius: 8px; margin-top: 10px; }
        #img-box { margin-top: 20px; min-height: 400px; display: flex; align-items: center; justify-content: center; }
        img { max-width: 100%; border: 2px solid #222; border-radius: 12px; }
    </style>
</head>
<body>
    <h1>AI GENERATOR (NO-SERVER)</h1>
    <textarea id="prompt" placeholder="Sua ideia..."></textarea><br>
    <button onclick="gerar()">GERAR AGORA</button>
    <div id="img-box">Aguardando...</div>

    <script>
        async function gerar() {
            const prompt = document.getElementById('prompt').value;
            const box = document.getElementById('img-box');
            box.innerHTML = "CONECTANDO DIRETAMENTE À GPU...";

            try {
                // TOKEN DIRETO NO FRONT (Para uso pessoal no Vercel)
                // Como a requisição sai do SEU PC e não do VERCEL, o erro 410 NÃO acontece.
                const response = await fetch(
                    "https://api-inference.huggingface.co/models/stabilityai/sdxl-turbo",
                    {
                        headers: { 
                            Authorization: "Bearer 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", 
                            "Content-Type": "application/json" 
                        },
                        method: "POST",
                        body: JSON.stringify({ inputs: prompt }),
                    }
                );

                if (!response.ok) throw new Error("O servidor da GPU está ocupado. Tente de novo.");

                const blob = await response.blob();
                const url = URL.createObjectURL(blob);
                box.innerHTML = `<img src="${url}">`;
            } catch (e) {
                box.innerHTML = "ERRO: " + e.message;
            }
        }
    </script>
</body>
</html>
